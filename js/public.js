function tt(){return(new Date).getTime()}$(function(){$("#top_btn").click(function(){$("html, body").animate({scrollTop:0},"slow")}),$(".m_list, #navbox .x,#cover").click(function(){$("#navbox").toggleClass("sn"),$("#cover").toggleClass("show")}),$(".title_pic").imgLiquid({fill:!1});var t={$e:$("#read_box"),$close:$("#read_box .close"),$pic:$("#read_box .pic"),$left:$("#read_box .left"),$right:$("#read_box .right"),$doubleLeft:$("#read_box .double-left"),$doubleRight:$("#read_box .double-right"),$bottomSpan:$("#read_box .bottom span"),now:-1,pics:[],inited:!1,addTime:!1,init:function(){return this.inited?this.inited:(this.$close.click(function(){this.close()}.bind(this)),this.$left.click(function(){this.prep()}.bind(this)),this.$right.click(function(){this.next()}.bind(this)),this.$doubleLeft.click(function(){this.now=0,this.pic()}.bind(this)),this.$doubleRight.click(function(){this.now=this.pics.length-1,this.pic()}.bind(this)),this.inited=!0,this.inited)},close:function(){this.$e.removeClass("s"),this.$pic.empty().addClass("h"),this.$bottomSpan.attr("data-a","0").attr("data-b","0"),this.pics=[],this.now=-1},show:function(t){this.init(),this.now=-1,this.pics=t,this.$bottomSpan.attr("data-a","0").attr("data-b","0"),this.$pic.empty().addClass("h"),this.$e.addClass("s"),this.next()},pic:function(){this.$bottomSpan.attr("data-a",this.now+1).attr("data-b",this.pics.length);var t=$("<img />").attr("src",this.pics[this.now]+(this.addTime?"?t="+tt():""));this.$pic.empty().addClass("h").append(t),t.load(function(){var i=t.get(0).width,s=t.get(0).height,e=$(window).width()-128-16,n=$(window).height()-55-16;i>e&&(s=e/i*s,i=e),s>n&&(i=n/s*i,s=n),this.$pic.css({top:"calc((100% - 55px - 4px * 2 - "+s+"px) / 2)",left:"calc((100% - "+i+"px) / 2)",width:i+"px",height:s+"px","line-height":s+"px"}).removeClass("h")}.bind(this))},prep:function(){this.now=--this.now<0?this.pics.length-1:this.now,this.pic()},next:function(){this.now=++this.now<this.pics.length?this.now:0,this.pic()}},i={$e:$("#video_box"),$title:$("#video_box .top span"),$video:$("#video_box .video"),$close:$("#video_box .close"),inited:!1,init:function(){return this.inited?this.inited:(this.$close.click(function(){this.close()}.bind(this)),this.inited=!0,this.inited)},show:function(t,i){this.init();var s=$("<iframe />").attr("src",i).attr("frameborder",0).attr("allow","autoplay; encrypted-media");this.$title.text(t),this.$video.append(s),this.$e.addClass("s")},close:function(){console.error("x"),this.$e.removeClass("s"),this.$video.empty(),this.$title.empty()}};$("*[data-video_box_title][data-video_box_src]").click(function(){i.show($(this).data("video_box_title"),$(this).data("video_box_src"))}),$(".banners").each(function(){var t=$(this),i=t.find(".items > *").length,s=t.data("type");t.find(".pic").imgLiquid();var e=$(Array.apply(null,{length:Math.ceil(i/s)}).map(function(){return $("<a />")})).map($.fn.toArray).click(function(){$(this).addClass("a").siblings().removeClass("a"),t.attr("data-i",$(this).index()*s+1)});t.find(".pages").empty().append($("<span />").append(e)),t.find(".left").click(function(){e.filter(".a").prev().length?e.filter(".a").prev().click():e.last().click()}),t.find(".right").click(function(){e.filter(".a").next().length?e.filter(".a").next().click():e.first().click()}),e.first().addClass("a")}),$(".read_box").click(function(){t.show($(this).data("pics"))})});